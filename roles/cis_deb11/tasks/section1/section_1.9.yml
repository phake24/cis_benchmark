- name: "1.9 | patching system"
  become: yes
  apt:
    name: "*"
    state: latest
    update_cache: yes
    cache_valid_time: 3600
    autoremove: yes
  when: 
    - level1|bool
    - ansible_os_family == "Debian"
  tags: 
    - section1
    - section1.9

- name: "1.9 | patching system"
  become: yes
  block: 
    - name: "1.9 |-> Patching"
      dnf:
        name: "*"
        state: latest
        update_cache: yes
    - name: "1.9 |-> Clean repolist"
      file:
          path: "{{ item }}"
          state: absent
      loop:
          - "uek-ol8.repo"
          - "oracle-linux-ol8.repo"
          - "virt-ol8.repo"
      ignore_errors: True
    - name: "1.9 |-> Autoremove" 
      dnf:
        autoremove: yes
  when: 
    - level1|bool
    - ansible_os_family == "RedHat"
  tags: 
    - section1
    - section1.9

